# libp2p-introspection-ui

User interface for visualising libp2p introspection data.

## Setup

This [Lerna monorepo](https://github.com/lerna/lerna), managed with [Yarn Workspaces](https://yarnpkg.com/lang/en/docs/workspaces/). To get started, clone the TBD repo, and run `yarn install`.

## Catalogue

A browsable catalogue of whitelisted React components built on the LibP2P Introspection UI SDK, and wiring these into a data file upload, a websocket to a live LibP2P node, or to provided sample data sets. Start using it with `npm run start:catalogue`. When the UI is loaded, several options are available to load data.

### Sample data

Pre-made data samples are provided to show how the UI works. They can be loaded using the `Sample data` button and selecting one of the datasets.

### Upload a file

Just like the pre-made samples, it's possible to upload your own dataset. TBC reference mock samples.

### Live connection

To get live introspection data streaming into the UI, it's possible to make a websocket connection to a live LibP2P node. When using the mock data server, the predefined url can be used. When connecting to the REPL interface, make sure to set the correct port the server is listening on and suffix with `/introspect`. The complete url should look something like `ws://127.0.0.1:25834/introspect`.

## Mock server

To run your own mock server that randomly generates data, start it from the `samples` folder using `npm run mock-sock`.

## REPL

TBC



- [**`packages/sdk`**](tree/master/packages/sdk): _Status: needs extending, more data structures, more base components including chart types and more input elements, and design improvements needed to the Timeline_. A Software Development Kit for building React components that consume and visualise LibP2P introspection data:
  - [`/components`](tree/master/packages/sdk/components): Base components which can be built on and extended. [**SDK components documentation**](docs/sdk/components/index.md)
  - [`/hooks`](tree/master/packages/sdk/hooks): Custom React Hooks for managing, formatting and manipulating LibP2P introspection data ready for consumption by components. [**SDK hooks documentation**](docs/sdk/hooks/index.md)
  - [`DataProvider`](tree/master/packages/sdk/components/DataProvider) contexts using [`useContext`](https://reactjs.org/docs/hooks-reference.html#usecontext) allowing data and user choices to be cleanly shared between components
  - Theming using [`styled-components`](https://github.com/styled-components/styled-components) and a `useContext` [`ThemeProvider`](tree/master/packages/sdk/components/DataProvider) allowing new components to easily share consistent styling

- [**`packages/proto`**](tree/master/packages/proto): _Status: mostly complete, needing testing and tweaks_. NodeJS scripts for working with LibP2P introspection data in [`protobuf` (Protocol Buffer)](https://developers.google.com/protocol-buffers) format:
  - [`/mock`](tree/master/packages/proto/mock): Scripts for simulating a LibP2P network, generating data files representing plausible network activity observed by a mock LibP2P node.
  - [`/protobuf`](tree/master/packages/proto/protobuf): Original `.proto` protobuf definition, with JavaScript parser and encoder generated by `protoc`.
  - [`/utils`](tree/master/packages/proto/utils) including helper functions and definitions to ease working with decoded LibP2P introspection data in JavaScript


And several example components built on the SDK:

- [**`packages/connections-table`**](tree/master/packages/connections-table) _Status: needs design improvements and additional features including filtering, sparklines and streams subtable_. An interactive data table showing the connections observed at a user-selected point in time, including cumulative traffic, peer Ids, connection status and transports.
- Streams visualisation TBC
- DHT visualisation TBC
- Additional visualisation TBC
- [**`packages/streams-table`**](tree/master/packages/streams-table) A very basic streams datatable added to demonstrate switching between visualizations in the catalogue.
